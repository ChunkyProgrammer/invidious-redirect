{"version":3,"sources":["unknown"],"names":["q","s","document","querySelector","qa","querySelectorAll","createElement","tag","properties","children","e","Object","keys","key","child","appendChild","shuffle","array","i","length","j","Math","floor","random","request","url","callback","xhr","XMLHttpRequest","addEventListener","readyState","status","JSON","parse","response","open","send","destinationPath","window","location","href","slice","origin","textContent","getAttribute","err","root","map","entry","healthKnown","monitor","name","details","health","dailyRatios","ratio","filter","type","sort","a","b","forEach","target","uri","replace","healthUnknown","toFixed","flag","region","className","remove"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n;(() => {\r\n\tconst q = s => document.querySelector(s)\r\n\tconst qa = s => document.querySelectorAll(s)\r\n\r\n\tfunction createElement(tag, properties = {}, children = []) {\r\n\t\tconst e = document.createElement(tag)\r\n\t\tfor (const key of Object.keys(properties)) {\r\n\t\t\te[key] = properties[key]\r\n\t\t}\r\n\t\tfor (const child of children) {\r\n\t\t\te.appendChild(child)\r\n\t\t}\r\n\t\treturn e\r\n\t}\r\n\r\n\tfunction shuffle(array) {\r\n\t\tfor (let i = 0; i < array.length; i++) {\r\n\t\t\tlet j = Math.floor(Math.random() * (array.length-i)) + i\r\n\t\t\t;[array[i], array[j]] = [array[j], array[i]]\r\n\t\t}\r\n\t\treturn array\r\n\t}\r\n\r\n\tfunction request(url, callback) {\r\n\t\tconst xhr = new XMLHttpRequest()\r\n\t\txhr.addEventListener(\"readystatechange\", () => {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tif (xhr.status === 200) {\r\n\t\t\t\t\tcallback(null, JSON.parse(xhr.response))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\txhr.open(\"GET\", url)\r\n\t\txhr.send()\r\n\t}\r\n\r\n\tconst destinationPath = window.location.href.slice(window.location.origin.length)\r\n\r\n\tq(\"#watch-on-youtube\").href = \"https://www.youtube.com\" + destinationPath\r\n\r\n\tfor (const e of qa(\"[data-loading-message]\")) {\r\n\t\te.textContent = e.getAttribute(\"data-loading-message\")\r\n\t}\r\n\r\n\trequest(\"https://api.invidious.io/instances.json?sort_by=type,health\",\r\n\t/** @param {[string, {monitor: any, flag: string, region: string, stats: any, type: string, uri: string}][]} root */ (err, root) => {\r\n\t\tshuffle(root)\r\n\t\troot.map(entry => {\r\n\t\t\tconst healthKnown = !!entry[1].monitor\r\n\t\t\treturn {\r\n\t\t\t\tname: entry[0],\r\n\t\t\t\tdetails: entry[1],\r\n\t\t\t\thealth: +(healthKnown ? entry[1].monitor.dailyRatios[0].ratio : 95),\r\n\t\t\t\thealthKnown\r\n\t\t\t}\r\n\t\t}).filter(entry => {\r\n\t\t\treturn entry.details.type === \"https\" && entry.health > 0\r\n\t\t}).sort((a, b) => {\r\n\t\t\treturn b.health - a.health\r\n\t\t}).forEach(entry => {\r\n\t\t\tlet target = entry.details.uri.replace(/\\/*$/, \"\") + destinationPath\r\n\t\t\tconst healthUnknown = entry.healthKnown ? \"\" : \"health-unknown \"\r\n\t\t\tconst health = entry.healthKnown ? entry.health.toFixed(0) : \"(unknown)\"\r\n\t\t\tq(\"#instances-tbody\").appendChild(\r\n\t\t\t\tcreateElement(\"tr\", {}, [\r\n\t\t\t\t\tcreateElement(\"td\", {textContent: `${entry.details.flag} ${entry.details.region}`}),\r\n\t\t\t\t\tcreateElement(\"td\", {textContent: entry.name}),\r\n\t\t\t\t\tcreateElement(\"td\", {className: \"column-center \"+healthUnknown, textContent: health}),\r\n\t\t\t\t\tcreateElement(\"td\", {className: \"column-center\"}, [\r\n\t\t\t\t\t\tcreateElement(\"a\", {href: target, textContent: \"Go â†’\"})\r\n\t\t\t\t\t])\r\n\t\t\t\t])\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\tfor (const e of qa(\".loading\")) {\r\n\t\t\te.remove()\r\n\t\t}\r\n\t})\r\n})()\r\n"]}